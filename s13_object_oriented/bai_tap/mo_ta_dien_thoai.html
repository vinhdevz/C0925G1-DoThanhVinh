<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Mobile</title>
</head>
<body>
<script>
    class Mobile {
        constructor(name) {
            this.name = name;
            this.battery = 100;
            this.isOn = false;
            this.draft = "";
            this.inBox = [];
            this.sent = [];
        }

        checkStatus() {
            return this.isOn ? "Bật" : "Tắt";
        }

        turnOn() {
            if (this.battery > 0) {
                this.isOn = true;
                console.log(`${this.name} đã bật.`);
            } else {
                console.log(`${this.name} hết pin, không thể bật.`);
            }
        }

        turnOff() {
            this.isOn = false;
            console.log(`${this.name} đã tắt.`);
        }

        chargeBattery() {
            this.battery = 100;
            console.log(`${this.name} đã sạc đầy pin.`);
        }

        writeMessage(message) {
            if (!this.isOn) {
                console.log(`${this.name} đang tắt, không thể soạn tin.`);
                return;
            }
            this.draft = message;
            this.consumeBattery();
            console.log(`${this.name} đang soạn tin: "${message}"`);
        }

        sendMessage(receiver) {
            if (!this.isOn) {
                console.log(`${this.name} đang tắt, không thể gửi tin.`);
                return;
            }
            if (this.draft === "") {
                console.log("Chưa có tin nhắn để gửi.");
                return;
            }

            receiver.receiveMessage(`${this.name}: ${this.draft}`);
            this.sent.push(this.draft);
            console.log(`${this.name} đã gửi tin: "${this.draft}" tới ${receiver.name}`);
            this.draft = "";
            this.consumeBattery();
        }

        receiveMessage(message) {
            if (!this.isOn) {
                console.log(`${this.name} đang tắt, không thể nhận tin.`);
                return;
            }
            this.inBox.push(message);
            this.consumeBattery();
        }

        showInbox() {
            console.log(`Hộp thư đến của ${this.name}:`);
            if (this.inBox.length === 0) console.log("Không có tin nhắn nào.");
            else this.inBox.forEach((msg, i) => console.log(`${i + 1}. ${msg}`));
        }

        showSent() {
            console.log(`Tin đã gửi của ${this.name}:`);
            if (this.sent.length === 0) console.log("Chưa gửi tin nào.");
            else this.sent.forEach((msg, i) => console.log(`${i + 1}. ${msg}`));
        }

        consumeBattery() {
            this.battery--;
            if (this.battery <= 0) {
                this.battery = 0;
                this.isOn = false;
                console.log(`${this.name} đã hết pin và tắt máy.`);
            }
        }
    }

    let iphone = new Mobile("iPhone");
    let samsung = new Mobile("Samsung");

    iphone.turnOn();
    samsung.turnOn();

    iphone.writeMessage("Xin chào Samsung!");
    iphone.sendMessage(samsung);

    samsung.writeMessage("Chào iPhone, tôi nhận được rồi!");
    samsung.sendMessage(iphone);

    iphone.showInbox();
    iphone.showSent();

    samsung.showInbox();
    samsung.showSent();
</script>
</body>
</html>
