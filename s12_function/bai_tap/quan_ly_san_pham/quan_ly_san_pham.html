<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quản lý sản phẩm</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        body {
            background-color: #f8f9fa;
            padding: 40px;
        }

        table {
            width: 100%;
        }

        h3 {
            color: #0d6efd;
            text-align: center;
            margin-bottom: 25px;
        }

        .quantity-box {
            display: inline-block;
            background-color: #e9f3ff;
            color: #0d6efd;
            border-radius: 20px;
            padding: 5px 15px;
            font-weight: 500;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .pagination {
            justify-content: center;
            margin-top: 20px;
        }
    </style>
</head>

<body>
<div class="container bg-white p-4 shadow rounded">
    <h3>Quản lý sản phẩm</h3><br>

    <div class="row mb-3">
        <div class="col-md-8">
            <input id="name" class="form-control" placeholder="Add New Product">
        </div>
        <div class="col-md-4">
            <button class="btn btn-primary w-100" onclick="addNewProduct()">Add</button>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-8">
            <input id="searchName" class="form-control" placeholder="Search For Product">
        </div>
        <div class="col-md-4">
            <button class="btn btn-success w-100" onclick="searchProduct()">Search</button>
        </div>
    </div>

    <div class="mb-3 text-end">
        <span class="quantity-box">Số lượng sản phẩm: <span id="quantity">0</span></span>
    </div>

    <div id="result" class="table-responsive"></div>

    <nav>
        <ul class="pagination">
            <li class="page-item"><button class="page-link" onclick="prevPage(0)">1</button></li>
            <li class="page-item"><button class="page-link" onclick="prevPage(1)">2</button></li>
        </ul>
    </nav>
</div>

<script>
    let productList = [
        "Sony Xper", "Samsung Galaxy", "Nokia 6", "Apple iPhone 6S",
    ];

    display(productList, 0);

    function display(list, startIndex = 0) {
        let tableString = `
        <table class="table table-bordered table-striped text-center align-middle">
            <thead class="table-primary">
              <tr>
                  <th>STT</th>
                  <th>Tên</th>
                  <th>Sửa</th>
                  <th>Xóa</th>
              </tr>
            </thead>
            <tbody>
        `;
        for (let i = 0; i < list.length; i++) {
            tableString += `
                <tr>
                    <td>${startIndex + i + 1}</td>
                    <td>${list[i]}</td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="editIndex(${startIndex + i})">Sửa</button>
                    </td>
                    <td>
                        <button class="btn btn-danger btn-sm" onclick="deleteIndex(${startIndex + i})">Xóa</button>
                    </td>
                </tr>
            `;
        }
        tableString += `
            </tbody>
        </table>
        `;
        document.getElementById("result").innerHTML = tableString;
        document.getElementById("quantity").innerText = productList.length;
    }

    function addNewProduct() {
        let name = document.getElementById("name").value;
        if (name !== "") {
            productList.push(name);
            document.getElementById("name").value = "";
            display(productList, 0);
        } else {
            alert("Vui lòng nhập tên sản phẩm!");
        }
    }

    function searchProduct() {
        let keyword = document.getElementById("searchName").value.trim().toLowerCase();
        if (keyword === "") {
            alert("Vui lòng nhập từ khóa để tìm kiếm sản phẩm!");
            display(productList, 0);
            return;
        }

        let filteredList = productList.filter(item => item.toLowerCase().includes(keyword));
        if (filteredList.length > 0) {
            display(filteredList, 0);
        } else {
            document.getElementById("result").innerHTML = `
                <div class="alert alert-warning text-center mt-3">
                    Không tìm thấy sản phẩm nào chứa "${keyword}"
                </div>
            `;
            document.getElementById("quantity").innerText = 0;
        }
    }

    function deleteIndex(index) {
        let conf = confirm(`Bạn có muốn xóa sản phẩm ${productList[index]} không?`);
        if (conf) {
            productList.splice(index, 1);
            display(productList, 0);
        }
    }

    function editIndex(index) {
        let newName = prompt(`Nhập tên mới cho sản phẩm: ${productList[index]}`);
        if (newName && newName.trim() !== "") {
            productList[index] = newName.trim();
            display(productList, 0);
        }
    }

    function prevPage(i) {
        let start = i * 2;
        let end = start + 2;
        let array1 = productList.slice(start, end);
        display(array1, start);
    }
</script>
</body>
</html>
